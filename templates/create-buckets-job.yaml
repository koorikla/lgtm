# apiVersion: batch/v1
# kind: Job
# metadata:
#   name: create-minio-buckets
# spec:
#   ttlSecondsAfterFinished: 120
#   template:
#     spec:
#       containers:
#       - name: create-buckets
#         image: minio/mc:RELEASE.2024-01-16T16-06-34Z
#         command: ["/bin/sh", "-c"]
#         args:
#         - |
#           echo "Waiting for MinIO..."
#           until mc alias set local http://grafana-stack-minio:9000 minio minio123; do
#             echo "MinIO not ready, retrying..."
#             sleep 2
#           done
          
#           echo "Creating buckets..."
#           mc mb --ignore-existing local/mimir-blocks
#           mc mb --ignore-existing local/mimir-ruler
#           mc mb --ignore-existing local/mimir-alertmanager
#           mc mb --ignore-existing local/loki-data
#           mc mb --ignore-existing local/tempo-data
          
#           echo "Buckets created successfully."
#       restartPolicy: OnFailure
